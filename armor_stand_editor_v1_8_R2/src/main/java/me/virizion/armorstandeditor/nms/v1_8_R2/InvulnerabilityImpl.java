package me.virizion.armorstandeditor.nms.v1_8_R2;

import java.lang.reflect.Field;

import org.bukkit.craftbukkit.v1_8_R2.entity.CraftArmorStand;
import org.bukkit.entity.ArmorStand;

import me.virizion.armorstandeditor.nms.Invulnerability;
import net.minecraft.server.v1_8_R2.Entity;

public class InvulnerabilityImpl implements Invulnerability
{

	@Override
	public boolean isInvulnerable(ArmorStand armorStand)
	{
		try
		{
			Field invulnerableField = Entity.class.getDeclaredField("invulnerable");
			invulnerableField.setAccessible(true);
			
			return invulnerableField.getBoolean(((CraftArmorStand) armorStand).getHandle());
		}
		catch (NoSuchFieldException | SecurityException | IllegalArgumentException | IllegalAccessException e)
		{
			e.printStackTrace();
			return false;
		}
	}

	@Override
	public void setInvulnerable(ArmorStand armorStand, boolean invulnerable)
	{
		try
		{
			Field invulnerableField = Entity.class.getDeclaredField("invulnerable");
			invulnerableField.setAccessible(true);
			invulnerableField.setBoolean(((CraftArmorStand) armorStand).getHandle(), invulnerable);
		}
		catch (NoSuchFieldException | SecurityException | IllegalArgumentException | IllegalAccessException e)
		{
			e.printStackTrace();
		}
	}

}
